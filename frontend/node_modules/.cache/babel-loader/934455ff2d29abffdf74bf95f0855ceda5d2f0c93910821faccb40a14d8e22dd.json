{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Muhammad Umer\\\\OneDrive\\\\Desktop\\\\Cloud Semester Project\\\\frontend\\\\src\\\\components\\\\Map.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport axios from 'axios';\nimport L from 'leaflet';\n\n// Fix for default marker icons in Leaflet with React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\n// Dummy schedule data for bus locations\nconst dummySchedule = [{\n  line_id: 'bakerloo',\n  lat: 51.5320,\n  lng: -0.1053,\n  nextStop: 'Paddington',\n  arrivalTime: '10:05'\n}, {\n  line_id: 'central',\n  lat: 51.5154,\n  lng: -0.1755,\n  nextStop: 'Oxford Circus',\n  arrivalTime: '10:10'\n}, {\n  line_id: 'circle',\n  lat: 51.5120,\n  lng: -0.1032,\n  nextStop: 'King\\'s Cross',\n  arrivalTime: '10:15'\n}, {\n  line_id: 'district',\n  lat: 51.5074,\n  lng: -0.1278,\n  nextStop: 'Victoria',\n  arrivalTime: '10:20'\n}, {\n  line_id: 'hammersmith-city',\n  lat: 51.5194,\n  lng: -0.1770,\n  nextStop: 'Hammersmith',\n  arrivalTime: '10:25'\n}, {\n  line_id: 'jubilee',\n  lat: 51.5033,\n  lng: -0.1145,\n  nextStop: 'Waterloo',\n  arrivalTime: '10:30'\n}, {\n  line_id: 'metropolitan',\n  lat: 51.5206,\n  lng: -0.1050,\n  nextStop: 'Baker Street',\n  arrivalTime: '10:35'\n}, {\n  line_id: 'northern',\n  lat: 51.5074,\n  lng: -0.1278,\n  nextStop: 'Camden Town',\n  arrivalTime: '10:40'\n}, {\n  line_id: 'piccadilly',\n  lat: 51.5098,\n  lng: -0.1337,\n  nextStop: 'Piccadilly Circus',\n  arrivalTime: '10:45'\n}, {\n  line_id: 'victoria',\n  lat: 51.4965,\n  lng: -0.1447,\n  nextStop: 'Green Park',\n  arrivalTime: '10:50'\n}, {\n  line_id: 'waterloo-city',\n  lat: 51.5033,\n  lng: -0.1145,\n  nextStop: 'Bank',\n  arrivalTime: '10:55'\n}];\nconst Map = () => {\n  _s();\n  const [metrics, setMetrics] = useState([]);\n  const [busLocations, setBusLocations] = useState(dummySchedule);\n  const [center] = useState([51.505, -0.09]); // London coordinates\n\n  useEffect(() => {\n    const fetchMetrics = async () => {\n      try {\n        const response = await axios.get('/metrics.json');\n        const data = response.data;\n        const metricsArray = Object.values(data);\n        setMetrics(metricsArray);\n      } catch (error) {\n        console.error('Error fetching metrics:', error);\n      }\n    };\n    fetchMetrics();\n    const interval = setInterval(fetchMetrics, 30000); // Update every 30 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Simulate real-time bus location updates\n  useEffect(() => {\n    const updateBusLocations = () => {\n      setBusLocations(prevLocations => prevLocations.map(bus => ({\n        ...bus,\n        lat: bus.lat + (Math.random() * 0.001 - 0.0005),\n        lng: bus.lng + (Math.random() * 0.001 - 0.0005)\n      })));\n    };\n    const busInterval = setInterval(updateBusLocations, 5000); // Update every 5 seconds\n    return () => clearInterval(busInterval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: center,\n    zoom: 11,\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), busLocations.map(bus => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [bus.lat, bus.lng],\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Line:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), \" \", bus.line_id, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 51\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Next Stop:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), \" \", bus.nextStop, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 57\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Arrival Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), \" \", bus.arrivalTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)\n    }, bus.line_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(Map, \"mrc5syHFsMLKbKsn7cVR7zw7R9Q=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","axios","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","dummySchedule","line_id","lat","lng","nextStop","arrivalTime","Map","_s","metrics","setMetrics","busLocations","setBusLocations","center","fetchMetrics","response","get","data","metricsArray","Object","values","error","console","interval","setInterval","clearInterval","updateBusLocations","prevLocations","map","bus","Math","random","busInterval","zoom","style","height","width","children","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","position","_c","$RefreshReg$"],"sources":["C:/Users/Muhammad Umer/OneDrive/Desktop/Cloud Semester Project/frontend/src/components/Map.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default marker icons in Leaflet with React\r\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\ninterface TransportMetric {\r\n  line_id: string;\r\n  line_name: string;\r\n  status: string;\r\n  delay_minutes: number;\r\n  reliability_percentage: number;\r\n  disruptions: number;\r\n  congestion_level: number;\r\n  timestamp: string;\r\n}\r\n\r\n// Dummy schedule data for bus locations\r\nconst dummySchedule = [\r\n  { line_id: 'bakerloo', lat: 51.5320, lng: -0.1053, nextStop: 'Paddington', arrivalTime: '10:05' },\r\n  { line_id: 'central', lat: 51.5154, lng: -0.1755, nextStop: 'Oxford Circus', arrivalTime: '10:10' },\r\n  { line_id: 'circle', lat: 51.5120, lng: -0.1032, nextStop: 'King\\'s Cross', arrivalTime: '10:15' },\r\n  { line_id: 'district', lat: 51.5074, lng: -0.1278, nextStop: 'Victoria', arrivalTime: '10:20' },\r\n  { line_id: 'hammersmith-city', lat: 51.5194, lng: -0.1770, nextStop: 'Hammersmith', arrivalTime: '10:25' },\r\n  { line_id: 'jubilee', lat: 51.5033, lng: -0.1145, nextStop: 'Waterloo', arrivalTime: '10:30' },\r\n  { line_id: 'metropolitan', lat: 51.5206, lng: -0.1050, nextStop: 'Baker Street', arrivalTime: '10:35' },\r\n  { line_id: 'northern', lat: 51.5074, lng: -0.1278, nextStop: 'Camden Town', arrivalTime: '10:40' },\r\n  { line_id: 'piccadilly', lat: 51.5098, lng: -0.1337, nextStop: 'Piccadilly Circus', arrivalTime: '10:45' },\r\n  { line_id: 'victoria', lat: 51.4965, lng: -0.1447, nextStop: 'Green Park', arrivalTime: '10:50' },\r\n  { line_id: 'waterloo-city', lat: 51.5033, lng: -0.1145, nextStop: 'Bank', arrivalTime: '10:55' }\r\n];\r\n\r\nconst Map: React.FC = () => {\r\n  const [metrics, setMetrics] = useState<TransportMetric[]>([]);\r\n  const [busLocations, setBusLocations] = useState(dummySchedule);\r\n  const [center] = useState<[number, number]>([51.505, -0.09]); // London coordinates\r\n\r\n  useEffect(() => {\r\n    const fetchMetrics = async () => {\r\n      try {\r\n        const response = await axios.get('/metrics.json');\r\n        const data = response.data;\r\n        const metricsArray = Object.values(data) as TransportMetric[];\r\n        setMetrics(metricsArray);\r\n      } catch (error) {\r\n        console.error('Error fetching metrics:', error);\r\n      }\r\n    };\r\n\r\n    fetchMetrics();\r\n    const interval = setInterval(fetchMetrics, 30000); // Update every 30 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Simulate real-time bus location updates\r\n  useEffect(() => {\r\n    const updateBusLocations = () => {\r\n      setBusLocations(prevLocations => \r\n        prevLocations.map(bus => ({\r\n          ...bus,\r\n          lat: bus.lat + (Math.random() * 0.001 - 0.0005),\r\n          lng: bus.lng + (Math.random() * 0.001 - 0.0005)\r\n        }))\r\n      );\r\n    };\r\n\r\n    const busInterval = setInterval(updateBusLocations, 5000); // Update every 5 seconds\r\n    return () => clearInterval(busInterval);\r\n  }, []);\r\n\r\n  return (\r\n    <MapContainer\r\n      center={center}\r\n      zoom={11}\r\n      style={{ height: '100%', width: '100%' }}\r\n    >\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      />\r\n      {busLocations.map((bus) => (\r\n        <Marker\r\n          key={bus.line_id}\r\n          position={[bus.lat, bus.lng]}\r\n        >\r\n          <Popup>\r\n            <div>\r\n              <strong>Line:</strong> {bus.line_id}<br />\r\n              <strong>Next Stop:</strong> {bus.nextStop}<br />\r\n              <strong>Arrival Time:</strong> {bus.arrivalTime}\r\n            </div>\r\n          </Popup>\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
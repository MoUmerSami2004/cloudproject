{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Muhammad Umer\\\\OneDrive\\\\Desktop\\\\Cloud Semester Project\\\\frontend\\\\src\\\\components\\\\Map.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport axios from 'axios';\n\n// Fix for default marker icons in Leaflet with React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst Map = () => {\n  _s();\n  const [vehicles, setVehicles] = useState([]);\n  const [center] = useState([40.7128, -74.0060]); // NYC coordinates\n\n  useEffect(() => {\n    const fetchVehicles = async () => {\n      try {\n        const response = await axios.get('http://localhost:8000/api/vehicles');\n        setVehicles(response.data);\n      } catch (error) {\n        console.error('Error fetching vehicles:', error);\n      }\n    };\n    fetchVehicles();\n    const interval = setInterval(fetchVehicles, 10000); // Update every 10 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: center,\n    zoom: 13,\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [vehicle.location.lat, vehicle.location.lng],\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: [\"Vehicle ID: \", vehicle.id, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 37\n        }, this), \"Route: \", vehicle.route_id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)\n    }, vehicle.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(Map, \"lb4qcSBxgkGS3T53Au8twm2Pf3U=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","axios","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","_s","vehicles","setVehicles","center","fetchVehicles","response","get","data","error","console","interval","setInterval","clearInterval","zoom","style","height","width","children","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","map","vehicle","position","location","lat","lng","id","route_id","_c","$RefreshReg$"],"sources":["C:/Users/Muhammad Umer/OneDrive/Desktop/Cloud Semester Project/frontend/src/components/Map.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport axios from 'axios';\r\n\r\n// Fix for default marker icons in Leaflet with React\r\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\ninterface Vehicle {\r\n  id: string;\r\n  route_id: string;\r\n  location: {\r\n    lat: number;\r\n    lng: number;\r\n  };\r\n}\r\n\r\nconst Map: React.FC = () => {\r\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\r\n  const [center] = useState<[number, number]>([40.7128, -74.0060]); // NYC coordinates\r\n\r\n  useEffect(() => {\r\n    const fetchVehicles = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/vehicles');\r\n        setVehicles(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching vehicles:', error);\r\n      }\r\n    };\r\n\r\n    fetchVehicles();\r\n    const interval = setInterval(fetchVehicles, 10000); // Update every 10 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <MapContainer\r\n      center={center}\r\n      zoom={13}\r\n      style={{ height: '100%', width: '100%' }}\r\n    >\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      />\r\n      {vehicles.map((vehicle) => (\r\n        <Marker\r\n          key={vehicle.id}\r\n          position={[vehicle.location.lat, vehicle.location.lng]}\r\n        >\r\n          <Popup>\r\n            Vehicle ID: {vehicle.id}<br />\r\n            Route: {vehicle.route_id}\r\n          </Popup>\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default Map; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,QAAQ,eAAe;AACtE,OAAO,0BAA0B;AACjC,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAQH,CAAC,CAACI,IAAI,CAACC,OAAO,CAACC,SAAS,CAASC,WAAW;AACpDP,CAAC,CAACI,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;AAWF,MAAMC,GAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACqB,MAAM,CAAC,GAAGrB,QAAQ,CAAmB,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;EAElED,SAAS,CAAC,MAAM;IACd,MAAMuB,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,oCAAoC,CAAC;QACtEJ,WAAW,CAACG,QAAQ,CAACE,IAAI,CAAC;MAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;IACF,CAAC;IAEDJ,aAAa,CAAC,CAAC;IACf,MAAMM,QAAQ,GAAGC,WAAW,CAACP,aAAa,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEpD,OAAO,MAAMQ,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEpB,OAAA,CAACP,YAAY;IACXoB,MAAM,EAAEA,MAAO;IACfU,IAAI,EAAE,EAAG;IACTC,KAAK,EAAE;MAAEC,MAAM,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAEzC3B,OAAA,CAACN,SAAS;MACRkC,GAAG,EAAC,oDAAoD;MACxDC,WAAW,EAAC;IAAyF;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtG,CAAC,EACDtB,QAAQ,CAACuB,GAAG,CAAEC,OAAO,iBACpBnC,OAAA,CAACL,MAAM;MAELyC,QAAQ,EAAE,CAACD,OAAO,CAACE,QAAQ,CAACC,GAAG,EAAEH,OAAO,CAACE,QAAQ,CAACE,GAAG,CAAE;MAAAZ,QAAA,eAEvD3B,OAAA,CAACJ,KAAK;QAAA+B,QAAA,GAAC,cACO,EAACQ,OAAO,CAACK,EAAE,eAACxC,OAAA;UAAA8B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,WACvB,EAACE,OAAO,CAACM,QAAQ;MAAA;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB;IAAC,GANHE,OAAO,CAACK,EAAE;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAOT,CACT,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACU,CAAC;AAEnB,CAAC;AAACvB,EAAA,CA3CID,GAAa;AAAAiC,EAAA,GAAbjC,GAAa;AA6CnB,eAAeA,GAAG;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}